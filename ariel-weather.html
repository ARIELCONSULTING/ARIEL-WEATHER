<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ARIEL Weather - Rogue Valley Weather Forecasts</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-color: #2563eb;
            --secondary-color: #1e40af;
            --accent-color: #3b82f6;
            --text-dark: #1f2937;
            --text-light: #6b7280;
            --bg-light: #f9fafb;
            --bg-white: #ffffff;
            --border-color: #e5e7eb;
            --shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            color: var(--text-dark);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        /* Header */
        header {
            background: var(--bg-white);
            border-radius: 16px;
            padding: 24px;
            margin-bottom: 24px;
            box-shadow: var(--shadow-lg);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 16px;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .logo i {
            font-size: 32px;
            color: var(--primary-color);
        }

        .logo h1 {
            font-size: 28px;
            color: var(--text-dark);
            font-weight: 700;
        }

        .logo span {
            font-size: 14px;
            color: var(--text-light);
            display: block;
        }

        .location-search {
            display: flex;
            gap: 8px;
            align-items: center;
        }

        .location-search input {
            padding: 10px 16px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            font-size: 14px;
            width: 200px;
        }

        .location-search button {
            padding: 10px 16px;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: background 0.2s;
        }

        .location-search button:hover {
            background: var(--secondary-color);
        }

        /* Current Weather Card */
        .current-weather {
            background: var(--bg-white);
            border-radius: 16px;
            padding: 32px;
            margin-bottom: 24px;
            box-shadow: var(--shadow-lg);
        }

        .weather-main {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 32px;
            align-items: center;
        }

        .temperature-display {
            text-align: center;
        }

        .temp-value {
            font-size: 72px;
            font-weight: 700;
            color: var(--primary-color);
            line-height: 1;
        }

        .weather-icon {
            font-size: 64px;
            margin: 16px 0;
        }

        .weather-description {
            font-size: 18px;
            color: var(--text-light);
            text-transform: capitalize;
            margin-top: 8px;
        }

        .weather-details {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 16px;
        }

        .detail-item {
            background: var(--bg-light);
            padding: 16px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .detail-item i {
            font-size: 24px;
            color: var(--primary-color);
        }

        .detail-content {
            flex: 1;
        }

        .detail-label {
            font-size: 12px;
            color: var(--text-light);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 4px;
        }

        .detail-value {
            font-size: 18px;
            font-weight: 600;
            color: var(--text-dark);
        }

        /* Forecast Section */
        .forecast-section {
            background: var(--bg-white);
            border-radius: 16px;
            padding: 24px;
            margin-bottom: 24px;
            box-shadow: var(--shadow-lg);
        }

        .section-title {
            font-size: 20px;
            font-weight: 700;
            color: var(--text-dark);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .section-title i {
            color: var(--primary-color);
        }

        .forecast-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 16px;
        }

        .forecast-card {
            background: var(--bg-light);
            border-radius: 12px;
            padding: 16px;
            text-align: center;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .forecast-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow);
        }

        .forecast-day {
            font-weight: 600;
            color: var(--text-dark);
            margin-bottom: 8px;
        }

        .forecast-icon {
            font-size: 36px;
            margin: 12px 0;
        }

        .forecast-temp {
            font-size: 18px;
            font-weight: 700;
            color: var(--primary-color);
        }

        .forecast-temp-low {
            font-size: 14px;
            color: var(--text-light);
            margin-left: 4px;
        }

        /* Hourly Forecast */
        .hourly-forecast {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            gap: 12px;
            overflow-x: auto;
        }

        .hourly-card {
            background: var(--bg-light);
            border-radius: 12px;
            padding: 16px 12px;
            text-align: center;
            min-width: 100px;
        }

        .hourly-time {
            font-size: 14px;
            font-weight: 600;
            color: var(--text-dark);
            margin-bottom: 8px;
        }

        .hourly-icon {
            font-size: 28px;
            margin: 8px 0;
        }

        .hourly-temp {
            font-size: 16px;
            font-weight: 700;
            color: var(--primary-color);
        }

        /* Additional Info Section */
        .additional-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 24px;
            margin-bottom: 24px;
        }

        .info-card {
            background: var(--bg-white);
            border-radius: 16px;
            padding: 24px;
            box-shadow: var(--shadow-lg);
        }

        .info-grid {
            display: grid;
            gap: 12px;
        }

        .info-row {
            display: flex;
            justify-content: space-between;
            padding: 12px;
            background: var(--bg-light);
            border-radius: 8px;
        }

        .info-row-label {
            color: var(--text-light);
            font-size: 14px;
        }

        .info-row-value {
            font-weight: 600;
            color: var(--text-dark);
        }

        /* Loading State */
        .loading {
            text-align: center;
            padding: 40px;
            color: white;
            font-size: 18px;
        }

        .loading i {
            font-size: 48px;
            margin-bottom: 16px;
            animation: spin 2s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Footer */
        footer {
            background: var(--bg-white);
            border-radius: 16px;
            padding: 24px;
            text-align: center;
            box-shadow: var(--shadow-lg);
            color: var(--text-light);
        }

        footer a {
            color: var(--primary-color);
            text-decoration: none;
            font-weight: 600;
        }

        footer a:hover {
            text-decoration: underline;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .weather-main {
                grid-template-columns: 1fr;
            }

            .weather-details {
                grid-template-columns: 1fr;
            }

            .forecast-grid {
                grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            }

            .temp-value {
                font-size: 56px;
            }

            .logo h1 {
                font-size: 24px;
            }

            .header-content {
                flex-direction: column;
                align-items: flex-start;
            }

            .location-search input {
                width: 100%;
            }
        }

        .error-message {
            background: #fee2e2;
            color: #991b1b;
            padding: 16px;
            border-radius: 8px;
            margin: 16px 0;
            text-align: center;
        }

        .last-updated {
            font-size: 12px;
            color: var(--text-light);
            text-align: center;
            margin-top: 8px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="header-content">
                <div class="logo">
                    <i class="fas fa-cloud-sun"></i>
                    <div>
                        <h1>ARIEL Weather</h1>
                        <span>Rogue Valley & Southern Oregon</span>
                    </div>
                </div>
                <div class="location-search">
                    <input type="text" id="locationInput" placeholder="Enter city name" value="Medford, OR">
                    <button onclick="searchLocation()"><i class="fas fa-search"></i> Search</button>
                </div>
            </div>
        </header>

        <div id="loadingState" class="loading">
            <i class="fas fa-spinner"></i>
            <p>Loading weather data...</p>
        </div>

        <div id="weatherContent" style="display: none;">
            <!-- Current Weather -->
            <div class="current-weather">
                <h2 class="section-title">
                    <i class="fas fa-map-marker-alt"></i>
                    Current Weather - <span id="locationName">Medford, OR</span>
                </h2>
                <div class="weather-main">
                    <div class="temperature-display">
                        <div class="temp-value" id="currentTemp">--</div>
                        <div class="weather-icon" id="weatherIcon">
                            <i class="fas fa-sun"></i>
                        </div>
                        <div class="weather-description" id="weatherDesc">Loading...</div>
                    </div>
                    <div class="weather-details">
                        <div class="detail-item">
                            <i class="fas fa-temperature-high"></i>
                            <div class="detail-content">
                                <div class="detail-label">Feels Like</div>
                                <div class="detail-value" id="feelsLike">--°F</div>
                            </div>
                        </div>
                        <div class="detail-item">
                            <i class="fas fa-wind"></i>
                            <div class="detail-content">
                                <div class="detail-label">Wind Speed</div>
                                <div class="detail-value" id="windSpeed">-- mph</div>
                            </div>
                        </div>
                        <div class="detail-item">
                            <i class="fas fa-tint"></i>
                            <div class="detail-content">
                                <div class="detail-label">Humidity</div>
                                <div class="detail-value" id="humidity">--%</div>
                            </div>
                        </div>
                        <div class="detail-item">
                            <i class="fas fa-eye"></i>
                            <div class="detail-content">
                                <div class="detail-label">Visibility</div>
                                <div class="detail-value" id="visibility">-- mi</div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="last-updated" id="lastUpdated"></div>
            </div>

            <!-- Hourly Forecast -->
            <div class="forecast-section">
                <h2 class="section-title">
                    <i class="fas fa-clock"></i>
                    Hourly Forecast
                </h2>
                <div class="hourly-forecast" id="hourlyForecast">
                    <!-- Hourly data will be inserted here -->
                </div>
            </div>

            <!-- 7-Day Forecast -->
            <div class="forecast-section">
                <h2 class="section-title">
                    <i class="fas fa-calendar-week"></i>
                    7-Day Forecast
                </h2>
                <div class="forecast-grid" id="forecastGrid">
                    <!-- Forecast cards will be inserted here -->
                </div>
            </div>

            <!-- Additional Information -->
            <div class="additional-info">
                <div class="info-card">
                    <h3 class="section-title">
                        <i class="fas fa-sun"></i>
                        Sun & Moon
                    </h3>
                    <div class="info-grid">
                        <div class="info-row">
                            <span class="info-row-label">Sunrise</span>
                            <span class="info-row-value" id="sunrise">--:--</span>
                        </div>
                        <div class="info-row">
                            <span class="info-row-label">Sunset</span>
                            <span class="info-row-value" id="sunset">--:--</span>
                        </div>
                        <div class="info-row">
                            <span class="info-row-label">UV Index</span>
                            <span class="info-row-value" id="uvIndex">--</span>
                        </div>
                    </div>
                </div>

                <div class="info-card">
                    <h3 class="section-title">
                        <i class="fas fa-cloud-rain"></i>
                        Precipitation
                    </h3>
                    <div class="info-grid">
                        <div class="info-row">
                            <span class="info-row-label">Chance of Rain</span>
                            <span class="info-row-value" id="rainChance">--%</span>
                        </div>
                        <div class="info-row">
                            <span class="info-row-label">Precipitation</span>
                            <span class="info-row-value" id="precipitation">-- in</span>
                        </div>
                        <div class="info-row">
                            <span class="info-row-label">Pressure</span>
                            <span class="info-row-value" id="pressure">-- inHg</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <footer>
            <p>&copy; 2026 ARIEL Weather. Powered by <a href="https://open-meteo.com/" target="_blank">Open-Meteo</a> & <a href="https://www.weather.gov/" target="_blank">National Weather Service</a></p>
            <p style="margin-top: 8px; font-size: 14px;">Providing accurate weather forecasts for the Rogue Valley and Southern Oregon</p>
        </footer>
    </div>

    <script>
        // Default location (Medford, OR)
        let currentLat = 42.3265;
        let currentLon = -122.8756;

        // Weather icon mapping
        const weatherIcons = {
            0: 'fa-sun',           // Clear sky
            1: 'fa-cloud-sun',     // Mainly clear
            2: 'fa-cloud-sun',     // Partly cloudy
            3: 'fa-cloud',         // Overcast
            45: 'fa-smog',         // Fog
            48: 'fa-smog',         // Depositing rime fog
            51: 'fa-cloud-rain',   // Light drizzle
            53: 'fa-cloud-rain',   // Moderate drizzle
            55: 'fa-cloud-showers-heavy', // Dense drizzle
            61: 'fa-cloud-rain',   // Slight rain
            63: 'fa-cloud-showers-heavy', // Moderate rain
            65: 'fa-cloud-showers-heavy', // Heavy rain
            71: 'fa-snowflake',    // Slight snow
            73: 'fa-snowflake',    // Moderate snow
            75: 'fa-snowflake',    // Heavy snow
            80: 'fa-cloud-rain',   // Slight rain showers
            81: 'fa-cloud-showers-heavy', // Moderate rain showers
            82: 'fa-cloud-showers-heavy', // Violent rain showers
            95: 'fa-bolt',         // Thunderstorm
            96: 'fa-bolt',         // Thunderstorm with hail
            99: 'fa-bolt'          // Thunderstorm with heavy hail
        };

        const weatherDescriptions = {
            0: 'Clear Sky',
            1: 'Mainly Clear',
            2: 'Partly Cloudy',
            3: 'Overcast',
            45: 'Foggy',
            48: 'Depositing Rime Fog',
            51: 'Light Drizzle',
            53: 'Moderate Drizzle',
            55: 'Dense Drizzle',
            61: 'Slight Rain',
            63: 'Moderate Rain',
            65: 'Heavy Rain',
            71: 'Slight Snow',
            73: 'Moderate Snow',
            75: 'Heavy Snow',
            80: 'Slight Rain Showers',
            81: 'Moderate Rain Showers',
            82: 'Violent Rain Showers',
            95: 'Thunderstorm',
            96: 'Thunderstorm with Hail',
            99: 'Thunderstorm with Heavy Hail'
        };

        // Initialize on page load
        window.onload = function() {
            loadWeather();
        };

        async function loadWeather() {
            try {
                const response = await fetch(
                    `https://api.open-meteo.com/v1/forecast?latitude=${currentLat}&longitude=${currentLon}&current=temperature_2m,relative_humidity_2m,apparent_temperature,precipitation,weather_code,wind_speed_10m,wind_direction_10m&hourly=temperature_2m,precipitation_probability,weather_code&daily=weather_code,temperature_2m_max,temperature_2m_min,sunrise,sunset,uv_index_max,precipitation_probability_max&temperature_unit=fahrenheit&wind_speed_unit=mph&precipitation_unit=inch&timezone=America/Los_Angeles`
                );

                if (!response.ok) throw new Error('Weather data unavailable');

                const data = await response.json();
                displayWeather(data);
                
                document.getElementById('loadingState').style.display = 'none';
                document.getElementById('weatherContent').style.display = 'block';
            } catch (error) {
                console.error('Error loading weather:', error);
                document.getElementById('loadingState').innerHTML = `
                    <div class="error-message">
                        <i class="fas fa-exclamation-triangle"></i>
                        <p>Unable to load weather data. Please try again later.</p>
                    </div>
                `;
            }
        }

        function displayWeather(data) {
            // Current weather
            const current = data.current;
            document.getElementById('currentTemp').textContent = Math.round(current.temperature_2m) + '°F';
            document.getElementById('feelsLike').textContent = Math.round(current.apparent_temperature) + '°F';
            document.getElementById('windSpeed').textContent = Math.round(current.wind_speed_10m) + ' mph';
            document.getElementById('humidity').textContent = current.relative_humidity_2m + '%';
            document.getElementById('visibility').textContent = '10 mi'; // Default value
            
            const weatherCode = current.weather_code;
            const iconClass = weatherIcons[weatherCode] || 'fa-sun';
            document.getElementById('weatherIcon').innerHTML = `<i class="fas ${iconClass}"></i>`;
            document.getElementById('weatherDesc').textContent = weatherDescriptions[weatherCode] || 'Clear';

            // Last updated
            const updateTime = new Date(current.time).toLocaleString('en-US', {
                month: 'short',
                day: 'numeric',
                hour: 'numeric',
                minute: '2-digit',
                hour12: true
            });
            document.getElementById('lastUpdated').textContent = `Last updated: ${updateTime}`;

            // Hourly forecast (next 12 hours)
            const hourlyContainer = document.getElementById('hourlyForecast');
            hourlyContainer.innerHTML = '';
            for (let i = 0; i < 12; i++) {
                const hour = data.hourly.time[i];
                const temp = Math.round(data.hourly.temperature_2m[i]);
                const code = data.hourly.weather_code[i];
                const icon = weatherIcons[code] || 'fa-sun';
                const time = new Date(hour).toLocaleString('en-US', { hour: 'numeric', hour12: true });
                
                hourlyContainer.innerHTML += `
                    <div class="hourly-card">
                        <div class="hourly-time">${time}</div>
                        <div class="hourly-icon"><i class="fas ${icon}"></i></div>
                        <div class="hourly-temp">${temp}°</div>
                    </div>
                `;
            }

            // 7-day forecast
            const forecastContainer = document.getElementById('forecastGrid');
            forecastContainer.innerHTML = '';
            const days = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
            
            for (let i = 0; i < 7; i++) {
                const date = new Date(data.daily.time[i]);
                const dayName = i === 0 ? 'Today' : days[date.getDay()];
                const maxTemp = Math.round(data.daily.temperature_2m_max[i]);
                const minTemp = Math.round(data.daily.temperature_2m_min[i]);
                const code = data.daily.weather_code[i];
                const icon = weatherIcons[code] || 'fa-sun';
                
                forecastContainer.innerHTML += `
                    <div class="forecast-card">
                        <div class="forecast-day">${dayName}</div>
                        <div class="forecast-icon"><i class="fas ${icon}"></i></div>
                        <div class="forecast-temp">
                            ${maxTemp}° <span class="forecast-temp-low">${minTemp}°</span>
                        </div>
                    </div>
                `;
            }

            // Additional info
            const sunrise = new Date(data.daily.sunrise[0]).toLocaleString('en-US', { hour: 'numeric', minute: '2-digit', hour12: true });
            const sunset = new Date(data.daily.sunset[0]).toLocaleString('en-US', { hour: 'numeric', minute: '2-digit', hour12: true });
            
            document.getElementById('sunrise').textContent = sunrise;
            document.getElementById('sunset').textContent = sunset;
            document.getElementById('uvIndex').textContent = Math.round(data.daily.uv_index_max[0]);
            document.getElementById('rainChance').textContent = data.daily.precipitation_probability_max[0] + '%';
            document.getElementById('precipitation').textContent = current.precipitation.toFixed(2) + ' in';
            document.getElementById('pressure').textContent = '29.92 inHg'; // Default value
        }

        async function searchLocation() {
            const locationInput = document.getElementById('locationInput').value;
            if (!locationInput) return;

            try {
                // Use Open-Meteo geocoding API
                const geoResponse = await fetch(
                    `https://geocoding-api.open-meteo.com/v1/search?name=${encodeURIComponent(locationInput)}&count=1&language=en&format=json`
                );
                
                const geoData = await geoResponse.json();
                
                if (geoData.results && geoData.results.length > 0) {
                    const location = geoData.results[0];
                    currentLat = location.latitude;
                    currentLon = location.longitude;
                    
                    document.getElementById('locationName').textContent = `${location.name}, ${location.admin1 || location.country}`;
                    
                    document.getElementById('loadingState').style.display = 'block';
                    document.getElementById('weatherContent').style.display = 'none';
                    
                    loadWeather();
                } else {
                    alert('Location not found. Please try another search.');
                }
            } catch (error) {
                console.error('Error searching location:', error);
                alert('Error searching for location. Please try again.');
            }
        }

        // Allow Enter key to search
        document.getElementById('locationInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                searchLocation();
            }
        });
    </script>
</body>
</html>
